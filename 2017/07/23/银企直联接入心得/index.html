<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="银企直联," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="银企直联本人在最近半年接手开发一个汇金项目，其主要作用与财务打款。开发过程中陆陆续续接手几家银行银企服务，现总结一下银企接入的心得。">
<meta name="keywords" content="银企直联">
<meta property="og:type" content="article">
<meta property="og:title" content="银企直联接入心得">
<meta property="og:url" content="http://yoursite.com/2017/07/23/银企直联接入心得/index.html">
<meta property="og:site_name" content="andy.xu">
<meta property="og:description" content="银企直联本人在最近半年接手开发一个汇金项目，其主要作用与财务打款。开发过程中陆陆续续接手几家银行银企服务，现总结一下银企接入的心得。">
<meta property="og:image" content="https://dn-mhc.qbox.me/2017-07-22-WechatIMG215.jpeg">
<meta property="og:updated_time" content="2017-07-23T07:39:20.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="银企直联接入心得">
<meta name="twitter:description" content="银企直联本人在最近半年接手开发一个汇金项目，其主要作用与财务打款。开发过程中陆陆续续接手几家银行银企服务，现总结一下银企接入的心得。">
<meta name="twitter:image" content="https://dn-mhc.qbox.me/2017-07-22-WechatIMG215.jpeg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/07/23/银企直联接入心得/"/>





  <title>银企直联接入心得 | andy.xu</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-103038982-1', 'auto');
  ga('send', 'pageview');
</script>











</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">andy.xu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">搬砖-.-!!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/23/银企直联接入心得/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="andy.xu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://dn-mhc.qbox.me/a2ec3301213fb80e85b0862a34d12f2eb83894f4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="andy.xu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">银企直联接入心得</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-23T15:29:44+08:00">
                2017-07-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="银企直联"><a href="#银企直联" class="headerlink" title="银企直联"></a>银企直联</h1><p>本人在最近半年接手开发一个汇金项目，其主要作用与财务打款。开发过程中陆陆续续接手几家银行银企服务，现总结一下银企接入的心得。<a id="more"></a><br>摘录 wiki 上解释：</p>
<blockquote>
<p>银企直联是指集团企业在集团内部建立自己的资金管理系统，通过数据接口将内部资金管理系统与商业银行核心系统、网银或者现金管理平台实现联接。通过银企直联系统企业可实现实时帐户信息查询、明细查询、自动转帐、交易查询等功能。并且交易的实时性和方便性得到大幅提高。“银企直联”的应用特点是连接手段不限，公网、专线均可。</p>
</blockquote>
<p>按照本人目前理解，银企直连是为了解决财务分散打款麻烦，查找流水繁琐的一种解决方式。如若一家公司存在资金流动频繁，且有多个公用账户，财务打款时候势必会存在用一个账户打款，插一个 U 盾，然后换一个账户打款，再换一个盾。企业通过向银行办理银企直联服务，接入企业内部 ERP 服务，这样，企业就可以通过银企统一管理各个账户，可以解决分散打款的麻烦。我司目前创建汇金项目，接入银企服务，很大程度解决财务打款的麻烦。<br>现就将本人接入几家银行经历，谈谈各家银行的银企直联服务。<br>总得来说，接入银企大概流程为财务人员与银行洽谈银企服务，银行提供开发文档，按照银行开发文档开发。连接银企服务，需要使用银行提供 U 盾与银企软件。本人入手这几个银行，银企软件暂且只能安装在 window 上。按照开发文档部署服务器上环境，然后就是按照银行提供接口文档，进入开发。有些银行会提供测试环境，且在测试环境通过后，提供测试报告，才会提供正式生产环境-。-！！。<br>银企一般交互流程，企业内部与前置机一般参用 HTTP 协议传输交易报文，报文传输到前置机，前置机负责加密传输到银行的服务器，然后由前置机负责接收解密银行返回报文。部分银行可以通过专线直接与银行服务器通信。</p>
<h2 id="目前开发过银企的银行"><a href="#目前开发过银企的银行" class="headerlink" title="目前开发过银企的银行:"></a>目前开发过银企的银行:</h2><ul>
<li>[x] 招商银行</li>
<li>[x] 建设银行</li>
<li>[x] 宁波银行</li>
<li>[x] 平安银行</li>
<li>[ ] 工商银行</li>
<li>[ ] 浙商银行</li>
</ul>
<h2 id="招商银行"><a href="#招商银行" class="headerlink" title="招商银行"></a>招商银行</h2><p>接手开发第一个银行。基本基于招行的接口，构建我司汇金项目的基础。<br>使用方法：<br>获取招商银行提供的银企程序与 U 盾。银企程序需要安装在 window 系统的服务器上。银企程序安装简单，基本 next 就行。安装完成，设置该银企程序对外端口，启动程序，登录招行提供用户名既可。<br>接口开发：<br>招商银行提供文档里包含一份 java 程序 demo，报文构建与发送等基本仿照既可。相关接口基本按照文档提示开发即可，如遇相关开发问题，询问招商支持人员。<br>日常问题：<br>接入招商银企服务后，有时在支付调用接口阶段，银企返回支付可疑状态，可能有以下原因：</p>
<ol>
<li>前置机系统时间突然变化，导致银企程序异常，重新登录银企程序即可。</li>
<li>支付接口调用阶段，有其他接口正在同时调用。针对这个问题，我们设计将银企相关查询任务塞进任务队列，防止支付接口调用时，同时存在其他银企任务。<br>最近碰到一个问题，银企程序突然崩溃，重新启动程序显示<img src="https://dn-mhc.qbox.me/2017-07-22-WechatIMG215.jpeg" alt="银企程序报错">，查看磁盘，已无可用空间。查看银企程序 log 文件夹，已产生 25 GB 的日志文件，删除即可。😓<br>总结：<br>招商开发基本无多大难点，银企程序安装简单，接口文档完整。相关支付接口，可以在招商网站设置权限。</li>
</ol>
<h2 id="建设银行"><a href="#建设银行" class="headerlink" title="建设银行"></a>建设银行</h2><p>开发招商银行接口一个月后，谈恰了建行银企服务。<br>使用方法：<br>按例获取银行提供 U 盾与安装文档等。此时首先需要安装 U 盾驱动，不要安装 U 盾自带驱动，这个版本驱动，如果使用远程桌面，将会存在无法输入签名问题。由于前置机的 window 安装在虚拟机里，这是可能无法加载 U 盾，我们解决方法为用一台实体机加载 U 盾，映射到虚拟机里(具体技术不是很懂😓)。接着，安装 JDK5+ 以上java 。建行银企程序为 java 程序，故不需要安装，直接启动即可。程序启动之前需要设置操作员号码等参数，这些参数需在网银端设置开通。否则，程序将启动会失败。<br>接口开发：<br>文档里面未提供任何 java demo ，但是可向银行支持人员索取。建行发送报文时候需要这样发送<code>requestXML=&#39;xml&#39;</code>，但是开发文档未有提示，这是坑爹的地方。其他接口开发，按照文档开发即可。支付接口与招商不同之处，跨行支付，建行需要提供他行联行号，联行号等数据，可在文档帮助处发现。<br>总结：<br>相比较招商银行银企服务，建行银企服务安装较为繁琐且设置也比较麻烦。</p>
<h2 id="宁波银行"><a href="#宁波银行" class="headerlink" title="宁波银行"></a>宁波银行</h2><p>这家银行银企服务相对坑爹。 银行相关支持人员不知道前置机软件怎么安装，提供的帮助文档只适用于企业使用用友或金蝶先关 ERP 软件的企业。后经与其总行交谈，才获取接口等文档。<br>使用方法：<br>宁波银行首先得在其测试环境测试，测试完成后，出具测试报告，才会给你正式盾以及给你开通正式环境。宁波银行前置机软件，启动后，需要指定两个端口，一个为报文接受端口，一个为加密端口。<br>接口开发：<br>宁波银行与上面银行不同之处在于，其每笔报文发送之前需调用其登录接口，获取其 session 值，然后构建报文，发送报文到前置机加密，获取签名数据，然后将签名报文数据构建到 xml 中，再将报文发送。<br>总结：这家银行不是本人经手接入的银行，开发过程相关痛点与接入这家银行同学处得知。银行支持人员提供支持，却只有使用用友等软件的经验，期间只能通过其与总行人员联系，花费时间较多。</p>
<h2 id="平安银行"><a href="#平安银行" class="headerlink" title="平安银行"></a>平安银行</h2><p>使用平安银行银企服务，是为了使用其提供的快付服务，解决周末或工作日17点以后无法大额大款的问题。但是真正使用快付以后，快付存在相关问题：</p>
<ol>
<li>只覆盖相关主流银行，某些银行不支持。这点能理解，毕竟我国银行数量实在太多。</li>
<li>其快付服务存在不稳定因素，支持的银行可能会存在付款失败的问题。运气差点，可能会碰到钱已打出，其内部付款失败，钱挂账在银行，过来一两天才退款。<br>使用方法：<br>获取其提供安装包，平安银行银企程序也是基于 java 开发，故需要安装 JDK 。官方文档提示使用 JDK6+ ,使用其他版本 JDK 版本，可能存在某些问题，做好使用银行提供 JDK 版本。安装 U 盾驱动以后，运行银企程序。然后在其软件中设置端口等参数。首次使用软件时，需在证书设置，验证证书才可以。<br>接口开发:<br>平安银行与上述银行不同在于，其报文有报头+报体构成。报头需按照开发文档构建。部分接口需要签名以后发送，前置机软件需得这些接口加入签名序列。<br>总结：<br>开发过程较为顺畅，文档等较为齐全。</li>
</ol>
<h2 id="工商银行"><a href="#工商银行" class="headerlink" title="工商银行"></a>工商银行</h2><p>工商银行较早拿到开发文档，但因其他项目延迟开发，最近才接入工商银行完毕。<br>使用方法：<br>安装前置机软件，简单的安装方式，一路 next 即可。工商银行前期只能在其测试地址测试，配置前置机参数，需银行人员提供文档。测试完毕，出示测试报告，方能拿到正式 U 盾。U 盾需安装专门 U 盾驱动，不要使用盾自带的驱动，否侧会造成报文不能接受等问题。这时，还得向银行人员索要生产环境配置方式，配置完成后，还得需要等待，U 盾证书解冻，银行人员分配证书权限等。<br>接口开发：<br>相关接口开发并无其相关难点，只是某些接口需要先加密，再发送。<br>总结:工行主要难点可能存在于前置机软件的配置上。相关证书操作，只能等待银行人员开通</p>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>接入上述几家银行银企服务，能感受到，大行提供的银企服务较为全面，各种接口齐全，银行技术支持也比较全面。其次，银行相关东西申请，等待时间过久，你懂得（逃。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/银企直联/" rel="tag"># 银企直联</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/16/hello-world/" rel="next" title="hello-world">
                <i class="fa fa-chevron-left"></i> hello-world
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://dn-mhc.qbox.me/a2ec3301213fb80e85b0862a34d12f2eb83894f4.jpg"
               alt="andy.xu" />
          <p class="site-author-name" itemprop="name">andy.xu</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/9526xu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#银企直联"><span class="nav-number">1.</span> <span class="nav-text">银企直联</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#目前开发过银企的银行"><span class="nav-number">1.1.</span> <span class="nav-text">目前开发过银企的银行:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#招商银行"><span class="nav-number">1.2.</span> <span class="nav-text">招商银行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#建设银行"><span class="nav-number">1.3.</span> <span class="nav-text">建设银行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#宁波银行"><span class="nav-number">1.4.</span> <span class="nav-text">宁波银行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#平安银行"><span class="nav-number">1.5.</span> <span class="nav-text">平安银行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#工商银行"><span class="nav-number">1.6.</span> <span class="nav-text">工商银行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结："><span class="nav-number">1.7.</span> <span class="nav-text">总结：</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">andy.xu</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
